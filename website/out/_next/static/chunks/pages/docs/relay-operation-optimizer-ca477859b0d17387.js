(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8028],{40702:function(i,s,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/relay-operation-optimizer",function(){return e(35961)}])},35961:function(i,s,e){"use strict";e.r(s),e.d(s,{default:function(){return o},useTOC:function(){return k}});var n=e(24246),r=e(25737),l=e(90946),h=e(20778),t=e(20467),a=e(67482),d=e(26801);function k(i){return[{value:"Current List of Features",id:"current-list-of-features",depth:2},{value:"Installation",id:"installation",depth:2},{value:"Usage",id:"usage",depth:2}]}function c(i,s){throw Error("Expected "+(s?"component":"object")+" `"+i+"` to be defined: you likely forgot to import, pass, or provide it.")}let p=(0,r.c)(function(i){let{toc:s=k(i)}=i,e=Object.assign({h1:"h1",p:"p",code:"code",a:"a",h2:"h2",ul:"ul",li:"li",pre:"pre",span:"span",strong:"strong"},(0,h.a)(),i.components);return t.m||c("$Tabs",!1),t.m.Tab||c("$Tabs.Tab",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{children:"Optimizing Operations Using Relay Compiler"}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.code,{children:"@graphql-tools/relay-operation-optimizer"})," is a package for bringing the benefits of Relay Compiler\nto GraphQL tools. This package is used in\n",(0,n.jsxs)(e.a,{href:"https://graphql-code-generator.com/docs/plugins/relay-operation-optimizer",children:[(0,n.jsx)(e.code,{children:"flattenGeneratedTypes"})," feature of GraphQL Code Generator"]}),"."]}),"\n",(0,n.jsxs)(e.p,{children:["This package has been created by ",(0,n.jsx)(e.a,{href:"https://github.com/n1ru4l",children:"Laurin Quast (n1ru4l)"})," as a\n",(0,n.jsx)(e.a,{href:"https://github.com/n1ru4l/graphql-codegen-relay-plugins",children:"GraphQL Code Generator plugin"}),"."]}),"\n",(0,n.jsx)(e.h2,{id:s[0].id,children:s[0].value}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsxs)(e.li,{children:[(0,n.jsx)(e.a,{href:"https://relay.dev/docs/en/compiler-architecture#transforms",children:"Optimize Queries"})," TL;DR: reduce query\nsize","\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:"Inline Fragments"}),"\n",(0,n.jsx)(e.li,{children:"Flatten Transform"}),"\n",(0,n.jsx)(e.li,{children:"Skip Redundant Node Transform"}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(e.li,{children:["FragmentArguments","\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://relay.dev/docs/en/graphql-in-relay#argumentdefinitions",children:(0,n.jsx)(e.code,{children:"@argumentsDefinition"})})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://relay.dev/docs/en/graphql-in-relay#arguments",children:(0,n.jsx)(e.code,{children:"@arguments"})})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(e.h2,{id:s[1].id,children:s[1].value}),"\n",(0,n.jsxs)(t.m,{items:["npm","pnpm","yarn","bun"],storageKey:"selectedPackageManager",children:[(0,n.jsx)(t.m.Tab,{children:(0,n.jsx)(e.pre,{icon:d.Fx,"data-language":"sh","data-copy":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"npm"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" i"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" @graphql-tools/relay-operation-optimizer"})]})})})}),(0,n.jsx)(t.m.Tab,{children:(0,n.jsx)(e.pre,{icon:d.Fx,"data-language":"sh","data-copy":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"pnpm"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" add"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" @graphql-tools/relay-operation-optimizer"})]})})})}),(0,n.jsx)(t.m.Tab,{children:(0,n.jsx)(e.pre,{icon:d.Fx,"data-language":"sh","data-copy":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"yarn"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" add"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" @graphql-tools/relay-operation-optimizer"})]})})})}),(0,n.jsx)(t.m.Tab,{children:(0,n.jsx)(e.pre,{icon:d.Fx,"data-language":"sh","data-copy":"",children:(0,n.jsx)(e.code,{children:(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:"bun"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" add"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:" @graphql-tools/relay-operation-optimizer"})]})})})})]}),"\n",(0,n.jsx)(e.h2,{id:s[2].id,children:s[2].value}),"\n",(0,n.jsx)(a.U,{children:(0,n.jsxs)(e.p,{children:["Taken from the blog post ",(0,n.jsx)(e.a,{href:"https://the-guild.dev/blog/graphql-codegen-relay-compiler",children:"Optimizing your Apollo Operations with GraphQL Code Generator and the\nRelay Compiler"}),"."]})}),"\n",(0,n.jsx)(e.p,{children:"Let’s take a look at the following Fragment:"}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fragment"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" UserAvatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" on"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" User"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsxs)(e.p,{children:["How would you reuse this fragment with different values for the ",(0,n.jsx)(e.code,{children:"width"})," and ",(0,n.jsx)(e.code,{children:"height"})," arguments?"]}),"\n",(0,n.jsx)(e.p,{children:"Previously there have been two ways:"}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"1. Write a new fragment with different parameters"})}),"\n",(0,n.jsx)(e.p,{children:"Well, just creating a new document for our avatar won’t really the reusability issue."}),"\n",(0,n.jsx)(e.p,{children:(0,n.jsx)(e.strong,{children:"2. Use variables and rely on the query to have those defined"})}),"\n",(0,n.jsx)(e.p,{children:"Actually, you can already use variables inside fragments. We just need to ensure that the query that\nuses the fragment also has those variables in the variable definition."}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-filename":"Fragment Definition","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fragment"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" UserAvatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" on"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" User"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-filename":"Query Definition","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"query"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" ProfileQuery"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"!"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"!"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  me"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"UserAvatar"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:"However, we now rely on having those parameters provided in each query that uses that fragment."}),"\n",(0,n.jsx)(e.p,{children:"This does not make the fragment reusable. Imagine having a profile query with a friend list. The\nprofile picture should be bigger than the ones of the friends."}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"query"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" ProfileQuery"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"!"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"!"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  me"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"UserAvatar"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    friends"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"first"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"      ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"UserAvatar"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:"It is basically impossible to use a different width and height for the second usage of the fragment\nin that query."}),"\n",(0,n.jsx)(e.p,{children:"Furthermore, when using different fragments you have to be careful with your variable names, because\nof variable name clashes."}),"\n",(0,n.jsx)(e.p,{children:"Given those limitations, it is pretty obvious that this “solution” does not scale well."}),"\n",(0,n.jsx)(e.p,{children:"Relay simply uses custom GraphQL directives to address this issue."}),"\n",(0,n.jsxs)(e.p,{children:["Defining Fragment Variables with ",(0,n.jsx)(e.code,{children:"@argumentDefinitions"}),":"]}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"fragment"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" UserAvatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" on"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" User"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" @argumentDefinitions"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("})]}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": { "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"type"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": “"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"”, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"defaultValue"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" },"})]}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": { "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"type"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": “"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"Int"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"”, "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"},children:"defaultValue"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" }"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"$height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsxs)(e.p,{children:["Providing Fragment Variables with ",(0,n.jsx)(e.code,{children:"@arguments"}),":"]}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"query"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" ProfileQuery"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  me"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsxs)(e.span,{"data-highlighted-line":"",children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"UserAvatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" @arguments"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:")"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    friends"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"first"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"      ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"UserAvatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"},children:" # fallback to defaultValue here"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:"Pretty powerful, right?"}),"\n",(0,n.jsxs)(e.p,{children:["Unfortunately, you cannot simply use those fragments with your existing GraphQL Server.\n",(0,n.jsx)(e.code,{children:"@argumentDefinitions"})," and ",(0,n.jsx)(e.code,{children:"@arguments"})," are some custom directives that need to be understood by the\nserver in order to process them."]}),"\n",(0,n.jsxs)(e.p,{children:["However, instead of implementing those directives on the serverside Relay went another route. The\n",(0,n.jsx)(e.code,{children:"relay-compiler"})," removes those directives at build time. That means after our query has been\nprocessed it looks something like the following:"]}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"query"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" ProfileQuery"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  me"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"    ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" on"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" User"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    friends"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"first"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"      ..."}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:" on"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:" User"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"          id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"          url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"        }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsx)(e.p,{children:"Pretty neat. This allows the query to be accepted by every GraphQL server (that, of course, provides\nthe correct schema), without relying on those custom directives."}),"\n",(0,n.jsxs)(a.U,{emoji:"\uD83C\uDF89",children:["The ",(0,n.jsx)(e.code,{children:"relay-compiler"})," is awesome!"]}),"\n",(0,n.jsxs)(e.p,{children:["It comes with a lot more transforms. Some of those are specific to the ",(0,n.jsx)(e.code,{children:"relay-runtime"})," (which as the\nname says is executed in the browser of the user like react-apollo), but others are also beneficial\nto non-relay users."]}),"\n",(0,n.jsxs)(e.p,{children:["Besides the so-called ",(0,n.jsx)(e.code,{children:"RelayApplyFragmentArgumentTransform"})," there is a bunch of more useful stuff."]}),"\n",(0,n.jsxs)(e.p,{children:["E.g. the ",(0,n.jsx)(e.code,{children:"FlattenTransform"})," can improve our query even more:"]}),"\n",(0,n.jsx)(e.pre,{"data-language":"graphql","data-copy":"",children:(0,n.jsxs)(e.code,{children:[(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"},children:"query"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"},children:" ProfileQuery"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"  me"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:" {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"20"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"    friends"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"first"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      id"})}),"\n",(0,n.jsxs)(e.span,{children:[(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"      avatar"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"("}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"width"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:", "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"height"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:": "}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"},children:"10"}),(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:") {"})]}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        id"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#E36209","--shiki-dark":"#FFAB70"},children:"        url"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"      }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"    }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"  }"})}),"\n",(0,n.jsx)(e.span,{children:(0,n.jsx)(e.span,{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"},children:"}"})})]})}),"\n",(0,n.jsxs)(e.p,{children:[(0,n.jsx)(e.a,{href:"https://github.com/n1ru4l",children:"Laurin Quast"})," also built a\n",(0,n.jsx)(e.a,{href:"https://relay-compiler-repl.netlify.com/",children:"relay-compiler REPL"})," (use it for convincing your team\n\uD83D\uDE09)."]}),"\n",(0,n.jsxs)(e.p,{children:["Of course, you can also read more about those in the\n",(0,n.jsx)(e.a,{href:"https://relay.dev/docs/en/compiler-architecture#transforms",children:"Official Relay Documentation"}),"."]}),"\n",(0,n.jsx)(e.p,{children:"Especially on big queries, that utilize many fragments, those transforms can drastically reduce the\nquery payload size, resulting in faster response times. For developers that cannot use persisted\nqueries (because they do not own the server), this is a must-have!"})]})},"/docs/relay-operation-optimizer",{filePath:"src/pages/docs/relay-operation-optimizer.mdx",timestamp:168924556e4,pageMap:l.v,frontMatter:{},title:"Optimizing Operations Using Relay Compiler"},"undefined"==typeof RemoteContent?k:RemoteContent.useTOC);function o(i){return p(i)}},67482:function(i,s,e){"use strict";e.d(s,{U:function(){return a}});var n=e(24246),r=e(40624),l=e(26801);let h={default:"\uD83D\uDCA1",error:"\uD83D\uDEAB",info:(0,n.jsx)(l.AV,{className:"_mt-1"}),warning:"⚠️"},t={default:(0,r.Z)("_border-orange-100 _bg-orange-50 _text-orange-800 dark:_border-orange-400/30 dark:_bg-orange-400/20 dark:_text-orange-300"),error:(0,r.Z)("_border-red-200 _bg-red-100 _text-red-900 dark:_border-red-200/30 dark:_bg-red-900/30 dark:_text-red-200"),info:(0,r.Z)("_border-blue-200 _bg-blue-100 _text-blue-900 dark:_border-blue-200/30 dark:_bg-blue-900/30 dark:_text-blue-200"),warning:(0,r.Z)("_border-yellow-100 _bg-yellow-50 _text-yellow-900 dark:_border-yellow-200/30 dark:_bg-yellow-700/30 dark:_text-yellow-200")};function a({children:i,type:s="default",emoji:e=h[s]}){return(0,n.jsxs)("div",{className:(0,r.Z)("nextra-callout _overflow-x-auto _mt-6 _flex _rounded-lg _border _py-2 ltr:_pr-4 rtl:_pl-4","contrast-more:_border-current contrast-more:dark:_border-current",t[s]),children:[(0,n.jsx)("div",{className:"_select-none _text-xl ltr:_pl-3 ltr:_pr-2 rtl:_pr-3 rtl:_pl-2",style:{fontFamily:'"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'},children:e}),(0,n.jsx)("div",{className:"_w-full _min-w-0 _leading-7",children:i})]})}},20467:function(i,s,e){"use strict";e.d(s,{m:function(){return N}});var n,r,l,h=e(24246),t=e(27378),a=e(36616),d=e(22652),k=e(57953),c=e(7723),p=e(4818),o=e(85804),E=e(92296),x=e(62722),g=e(37349),j=e(66412),u=e(14784);function y({onFocus:i}){let[s,e]=(0,t.useState)(!0),n=(0,j.t)();return s?t.createElement(u._,{as:"button",type:"button",features:u.A.Focusable,onFocus:s=>{s.preventDefault();let r,l=50;r=requestAnimationFrame(function s(){if(l--<=0){r&&cancelAnimationFrame(r);return}if(i()){if(cancelAnimationFrame(r),!n.current)return;e(!1);return}r=requestAnimationFrame(s)})}}):null}var F=e(11981),f=e(96661),m=e(70458);let b=t.createContext(null);function A({children:i}){let s=t.useRef({groups:new Map,get(i,s){var e;let n=this.groups.get(i);n||(n=new Map,this.groups.set(i,n));let r=null!=(e=n.get(s))?e:0;return n.set(s,r+1),[Array.from(n.keys()).indexOf(s),function(){let i=n.get(s);i>1?n.set(s,i-1):n.delete(s)}]}});return t.createElement(b.Provider,{value:s},i)}function B(i){let s=t.useContext(b);if(!s)throw Error("You must wrap your component in a <StableCollection>");let e=function(){var i,s,e;let n=null!=(e=null==(s=null==(i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)?void 0:i.ReactCurrentOwner)?void 0:s.current)?e:null;if(!n)return Symbol();let r=[],l=n;for(;l;)r.push(l.index),l=l.return;return"$."+r.join(".")}(),[n,r]=s.current.get(i,e);return t.useEffect(()=>r,[]),n}var v=((n=v||{})[n.Forwards=0]="Forwards",n[n.Backwards=1]="Backwards",n),C=((r=C||{})[r.Less=-1]="Less",r[r.Equal=0]="Equal",r[r.Greater=1]="Greater",r),_=((l=_||{})[l.SetSelectedIndex=0]="SetSelectedIndex",l[l.RegisterTab=1]="RegisterTab",l[l.UnregisterTab=2]="UnregisterTab",l[l.RegisterPanel=3]="RegisterPanel",l[l.UnregisterPanel=4]="UnregisterPanel",l);let w={0(i,s){var e;let n=(0,p.z2)(i.tabs,i=>i.current),r=(0,p.z2)(i.panels,i=>i.current),l=n.filter(i=>{var s;return!(null!=(s=i.current)&&s.hasAttribute("disabled"))}),h={...i,tabs:n,panels:r};if(s.index<0||s.index>n.length-1){let e=(0,k.E)(Math.sign(s.index-i.selectedIndex),{[-1]:()=>1,0:()=>(0,k.E)(Math.sign(s.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(0===l.length)return h;let r=(0,k.E)(e,{0:()=>n.indexOf(l[0]),1:()=>n.indexOf(l[l.length-1])});return{...h,selectedIndex:-1===r?i.selectedIndex:r}}let t=n.slice(0,s.index),a=[...n.slice(s.index),...t].find(i=>l.includes(i));if(!a)return h;let d=null!=(e=n.indexOf(a))?e:i.selectedIndex;return -1===d&&(d=i.selectedIndex),{...h,selectedIndex:d}},1(i,s){var e;if(i.tabs.includes(s.tab))return i;let n=i.tabs[i.selectedIndex],r=(0,p.z2)([...i.tabs,s.tab],i=>i.current),l=null!=(e=r.indexOf(n))?e:i.selectedIndex;return -1===l&&(l=i.selectedIndex),{...i,tabs:r,selectedIndex:l}},2:(i,s)=>({...i,tabs:i.tabs.filter(i=>i!==s.tab)}),3:(i,s)=>i.panels.includes(s.panel)?i:{...i,panels:(0,p.z2)([...i.panels,s.panel],i=>i.current)},4:(i,s)=>({...i,panels:i.panels.filter(i=>i!==s.panel)})},T=(0,t.createContext)(null);function D(i){let s=(0,t.useContext)(T);if(null===s){let s=Error(`<${i} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,D),s}return s}T.displayName="TabsDataContext";let I=(0,t.createContext)(null);function P(i){let s=(0,t.useContext)(I);if(null===s){let s=Error(`<${i} /> is missing a parent <Tab.Group /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(s,P),s}return s}function q(i,s){return(0,k.E)(s.type,w,i,s)}I.displayName="TabsActionsContext";let O=t.Fragment,R=a.AN.RenderStrategy|a.AN.Static,S=Object.assign((0,a.yV)(function(i,s){var e,n;let r=(0,d.M)(),{id:l=`headlessui-tabs-tab-${r}`,...h}=i,{orientation:g,activation:j,selectedIndex:u,tabs:y,panels:b}=D("Tab"),A=P("Tab"),v=D("Tab"),C=(0,t.useRef)(null),_=(0,E.T)(C,s);(0,o.e)(()=>A.registerTab(C),[A,C]);let w=B("tabs"),T=y.indexOf(C);-1===T&&(T=w);let I=T===u,q=(0,F.z)(i=>{var s;let e=i();if(e===p.fE.Success&&"auto"===j){let i=null==(s=(0,m.r)(C))?void 0:s.activeElement,e=v.tabs.findIndex(s=>s.current===i);-1!==e&&A.change(e)}return e}),O=(0,F.z)(i=>{let s=y.map(i=>i.current).filter(Boolean);if(i.key===c.R.Space||i.key===c.R.Enter){i.preventDefault(),i.stopPropagation(),A.change(T);return}switch(i.key){case c.R.Home:case c.R.PageUp:return i.preventDefault(),i.stopPropagation(),q(()=>(0,p.jA)(s,p.TO.First));case c.R.End:case c.R.PageDown:return i.preventDefault(),i.stopPropagation(),q(()=>(0,p.jA)(s,p.TO.Last))}if(q(()=>(0,k.E)(g,{vertical:()=>i.key===c.R.ArrowUp?(0,p.jA)(s,p.TO.Previous|p.TO.WrapAround):i.key===c.R.ArrowDown?(0,p.jA)(s,p.TO.Next|p.TO.WrapAround):p.fE.Error,horizontal:()=>i.key===c.R.ArrowLeft?(0,p.jA)(s,p.TO.Previous|p.TO.WrapAround):i.key===c.R.ArrowRight?(0,p.jA)(s,p.TO.Next|p.TO.WrapAround):p.fE.Error}))===p.fE.Success)return i.preventDefault()}),R=(0,t.useRef)(!1),S=(0,F.z)(()=>{var i;R.current||(R.current=!0,null==(i=C.current)||i.focus({preventScroll:!0}),A.change(T),(0,f.Y)(()=>{R.current=!1}))}),U=(0,F.z)(i=>{i.preventDefault()}),z=(0,t.useMemo)(()=>({selected:I}),[I]),N={ref:_,onKeyDown:O,onMouseDown:U,onClick:S,id:l,role:"tab",type:(0,x.f)(i,C),"aria-controls":null==(n=null==(e=b[T])?void 0:e.current)?void 0:n.id,"aria-selected":I,tabIndex:I?0:-1};return(0,a.sY)({ourProps:N,theirProps:h,slot:z,defaultTag:"button",name:"Tabs.Tab"})}),{Group:(0,a.yV)(function(i,s){let{defaultIndex:e=0,vertical:n=!1,manual:r=!1,onChange:l,selectedIndex:h=null,...d}=i,k=n?"vertical":"horizontal",c=r?"manual":"auto",x=null!==h,j=(0,E.T)(s),[u,f]=(0,t.useReducer)(q,{selectedIndex:null!=h?h:e,tabs:[],panels:[]}),m=(0,t.useMemo)(()=>({selectedIndex:u.selectedIndex}),[u.selectedIndex]),b=(0,g.E)(l||(()=>{})),B=(0,g.E)(u.tabs),v=(0,t.useMemo)(()=>({orientation:k,activation:c,...u}),[k,c,u]),C=(0,F.z)(i=>(f({type:1,tab:i}),()=>f({type:2,tab:i}))),_=(0,F.z)(i=>(f({type:3,panel:i}),()=>f({type:4,panel:i}))),w=(0,F.z)(i=>{D.current!==i&&b.current(i),x||f({type:0,index:i})}),D=(0,g.E)(x?i.selectedIndex:u.selectedIndex),P=(0,t.useMemo)(()=>({registerTab:C,registerPanel:_,change:w}),[]);return(0,o.e)(()=>{f({type:0,index:null!=h?h:e})},[h]),(0,o.e)(()=>{if(void 0===D.current||u.tabs.length<=0)return;let i=(0,p.z2)(u.tabs,i=>i.current);i.some((i,s)=>u.tabs[s]!==i)&&w(i.indexOf(u.tabs[D.current]))}),t.createElement(A,null,t.createElement(I.Provider,{value:P},t.createElement(T.Provider,{value:v},v.tabs.length<=0&&t.createElement(y,{onFocus:()=>{var i,s;for(let e of B.current)if((null==(i=e.current)?void 0:i.tabIndex)===0)return null==(s=e.current)||s.focus(),!0;return!1}}),(0,a.sY)({ourProps:{ref:j},theirProps:d,slot:m,defaultTag:O,name:"Tabs"}))))}),List:(0,a.yV)(function(i,s){let{orientation:e,selectedIndex:n}=D("Tab.List"),r=(0,E.T)(s);return(0,a.sY)({ourProps:{ref:r,role:"tablist","aria-orientation":e},theirProps:i,slot:{selectedIndex:n},defaultTag:"div",name:"Tabs.List"})}),Panels:(0,a.yV)(function(i,s){let{selectedIndex:e}=D("Tab.Panels"),n=(0,E.T)(s),r=(0,t.useMemo)(()=>({selectedIndex:e}),[e]);return(0,a.sY)({ourProps:{ref:n},theirProps:i,slot:r,defaultTag:"div",name:"Tabs.Panels"})}),Panel:(0,a.yV)(function(i,s){var e,n,r,l;let h=(0,d.M)(),{id:k=`headlessui-tabs-panel-${h}`,tabIndex:c=0,...p}=i,{selectedIndex:x,tabs:g,panels:j}=D("Tab.Panel"),y=P("Tab.Panel"),F=(0,t.useRef)(null),f=(0,E.T)(F,s);(0,o.e)(()=>y.registerPanel(F),[y,F]);let m=B("panels"),b=j.indexOf(F);-1===b&&(b=m);let A=b===x,v=(0,t.useMemo)(()=>({selected:A}),[A]),C={ref:f,id:k,role:"tabpanel","aria-labelledby":null==(n=null==(e=g[b])?void 0:e.current)?void 0:n.id,tabIndex:A?c:-1};return A||null!=(r=p.unmount)&&!r||null!=(l=p.static)&&l?(0,a.sY)({ourProps:C,theirProps:p,slot:v,defaultTag:"div",features:R,visible:A,name:"Tabs.Panel"}):t.createElement(u._,{as:"span",...C})})});var U=e(40624);function z(i){return!!i&&"object"==typeof i&&"label"in i}let N=Object.assign(function({items:i,selectedIndex:s,defaultIndex:e=0,onChange:n,children:r,storageKey:l}){let[a,d]=(0,t.useState)(e);(0,t.useEffect)(()=>{void 0!==s&&d(s)},[s]),(0,t.useEffect)(()=>{if(!l)return;function i(i){i.key===l&&d(Number(i.newValue))}let s=Number(localStorage.getItem(l));return d(Number.isNaN(s)?0:s),window.addEventListener("storage",i),()=>{window.removeEventListener("storage",i)}},[]);let k=(0,t.useCallback)(i=>{if(l){let s=String(i);localStorage.setItem(l,s),window.dispatchEvent(new StorageEvent("storage",{key:l,newValue:s}));return}d(i),n?.(i)},[]);return(0,h.jsxs)(S.Group,{selectedIndex:a,defaultIndex:e,onChange:k,children:[(0,h.jsx)("div",{className:"nextra-scrollbar _overflow-x-auto _overflow-y-hidden _overscroll-x-contain",children:(0,h.jsx)(S.List,{className:"_mt-4 _flex _w-max _min-w-full _border-b _border-gray-200 _pb-px dark:_border-neutral-800",children:i.map((i,s)=>{let e=z(i)&&i.disabled;return(0,h.jsx)(S,{disabled:e,className:({selected:i})=>(0,U.Z)("_mr-2 _rounded-t _p-2 _font-medium _leading-5 _transition-colors","_-mb-0.5 _select-none _border-b-2",i?"_border-primary-500 _text-primary-600":"_border-transparent _text-gray-600 hover:_border-gray-200 hover:_text-black dark:_text-gray-200 dark:hover:_border-neutral-800 dark:hover:_text-white",e&&"_pointer-events-none _text-gray-400 dark:_text-neutral-600"),children:z(i)?i.label:i},s)})})}),(0,h.jsx)(S.Panels,{children:r})]})},{displayName:"Tabs",Tab:function({children:i,...s}){return(0,h.jsx)(S.Panel,{...s,className:"_rounded _pt-6",children:i})}})}},function(i){i.O(0,[9659,2888,9774,179],function(){return i(i.s=40702)}),_N_E=i.O()}]);